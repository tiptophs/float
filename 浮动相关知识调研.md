## 浮动相关知识调研

#### 1.1 css布局的三种机制 (网页布局的核心-css摆放盒子模型)

css提供了3种机制来设置盒子的摆放位置，分别为`普通流（标准流）`，`浮动`，`定位`

1. 普通流(标准流，文档流)
   - 块级元素会独占一行，从上向下顺序排列；
     - 查用元素：`div、hr、p、h1~h6、ul、li、ol、dl、form、table`
   - 行内元素，按照顺序在一行上从左向右顺序排序，碰到父元素边缘会自动换行。
     - 常用元素：`span、a、i、em`
2. 浮动
   - 让盒子从普通流中浮起来，主要作用让多个盒子一行显示。(主要处理块元素)
3. 定位
   - 将盒子定位到浏览器的某个位置。

#### 1.2 为什么需要浮动

- 场景一： 多个div需要在一行上显示

  - 这里有一种处理方式，div设置`display:inline-block`，但是浏览器会默认在行内元素之间保留间距，且处理起来兼容性很差，不建议这样做；[相关demo](http://127.0.0.1:5500/demo/divinline.html)
  
- 场景二： 两个div实现左对齐和右对齐

#### 1.3 什么是浮动

- 概念：元素的浮动是指设定了`浮动属性`的元素，它会有以下表现形式
  	1. 脱离标准普通流的控制， 不占有原来的位置
   2. 移动到指定的位置

- 作用：

  1. 让多个盒子(div)水平排成一行

  2. 可以实现盒子的左右对齐等等

  3. 浮动最早的作用来控制图片，实现文字环绕图片的效果。

  ![文字环绕效果](http://127.0.0.1:5500/img/huanrao.png)

- 语法：在css中，通过`float`属性定义浮动，语法如下：

   - ```
     选择器 {float: 属性值；}
     ```

   - | 属性值 | 描述               |
     | ------ | ------------------ |
     | none   | 元素不浮动(默认值) |
     | left   | 元素向左浮动       |
     | right  | 元素向右浮动       |

- 表现形式：

   - 设置了浮动的元素，**漂浮在普通流的上面**，不占位置，脱标。[demo](http://127.0.0.1:5500/demo/float-demo1.html)
   - 任何元素都可以浮动，设置了浮动属性的元素会改变display属性，不论之前为何种元素，生成的块级框和**行内块类似**。[demo](http://127.0.0.1:5500/demo/float-demo2.html)
   - 浮动的元素在一行上若容器撑不下，则会另起一行。

- 使用方法： 因为我们知道浮动是脱标的，会影响下面的标准流元素，所以我们需要给浮动的元素添加一个标准流的父亲，最大化减小浮动对其他标准流的影响。

#### 1.4 浮动的扩展部分

 - 浮动元素与父盒子的排列关系
   - 子盒子的浮动参照父盒子对齐
   - 不会与父盒子的边框重叠，也不会超过父盒子的内边距
   - [demo](http://127.0.0.1:5500/demo/float-demo3.html)
 - 浮动元素与兄弟盒子之间的关系
   - 在一个父级盒子中，如果前一个兄弟盒子是：
     	-  浮动   那么当前盒子会与前一个盒子顶部对齐
     	-  普通流 当前盒子显示在兄弟盒子的下方。
   - 规则： 浮动盒子只会影响当前的或者后面的盒子，不会影响 前面的标准流。
   - [demo](http://127.0.0.1:5500/demo/float-demo4.html)
  - 思考问题，既然浮动是脱离标准流的，那文字应该会显示在浮动的底部，但是它却是环绕的，为什么？浮动和定位的差别在哪里？

    - [demo](http://127.0.0.1:5500/demo/float-demo5.html)
    - 定位和浮动差异：
      - 可以看到定位是完全脱离标准流的，你可以看作它从来没有存在过。
      - 浮动虽然脱离了文档流(div等元素会显示在底部)但是没有脱离文本流，文本还是会识别到它的存在，形成环绕效果
      - 定位的高度要大于浮动。所有浮动的元素都会在一个平面上，不会出现浮动覆盖浮动的情况。
      - 定位的高度是可以相互覆盖的，采用z-index设置层级。换句话说z-index，只能对定位生效(非static)
    - 技巧，标语理解
      - 可以理解为标准流为大海，浮动为漂浮的冰块，定位为白云。

#### 1.5 浮动产生的影响和如何解决

- 影响：浮动元素不占位，脱离原来的标准流

  - 块元素不设置宽度，默认为父元素的宽度，设置浮动后(类似行内块)，宽度需要内容撑开。

  - 内联元素，浮动之后可以设置高度宽度，margin，和行内块类似，**不会保留之间的空隙**

  - **高度塌陷问题**

    - 首先要了解什么是高度塌陷，以及产生高度塌陷的原因:  如果父元素*不设置高*，或者设置*最小高*，高度由内容撑开，一旦内容浮动后不占位，就会出现高度塌陷。(开发中存在某些场景父元素的高度是确定不了的，我们无法预置死高度解决浮动带来的高度他先问题)

    - 解决方式，清除浮动

      - 本质就是让父元素能够检测到浮动的元素高度。

      - ```
        选择器 {clear: 属性值}
        ```

        | 属性值 | 描述                                 |
        | ------ | ------------------------------------ |
        | left   | 不允许左侧有浮动，清除左侧浮动的影响 |
        | right  | 不允许右侧右浮动，清除右侧浮动的影响 |
        | both   | 同时清除两侧的浮动 （常用）          |

        1. 额外标签法(隔墙发)

           ```
           w3c推荐的做法，通过浮动元素末尾添加一个空标签，例如：<div style="clear:both"></div>
           ```

           优点：通俗易懂，书写方便

           缺点：标签毫无意义，结构化差。（不建议这样使用）

        2. 父亲添加overflow属性方法

           ```
     可以给父级添加: overflow为 hidden | auto | scroll | overlay 的属性
           ```
        
           优点： 代码简洁
        
           缺点：内容增多时候容易造成不会自动换行，导致内容被隐藏掉，无法显示需要溢出的元素。
        
        3. 使用after伪元素清除浮动(父元素添加)
        
           ```css
           .clearfix:after {
           	content: "";
           	display: block;
           	height: 0;
           	visibility: hidden;
           	clear: both;
           }
           /*兼容*/
           .clearfix {
               *zoom: 1;  //ie6,ie7专门清除浮动的样式
           }
           ```
        
           优点：**:after方式为空元素额外标签法的升级版本，好处是不用再添加额外单独的标签了** 结构语义化正确，符合闭合浮动的思想。
        
           缺点：ie6/7的兼容问题
        
        4. 使用双伪元素清除浮动
        
           ```css
           .clearfix:before, .clearfix:after {
               content: "";
               display: table;
           }
           
           .clearfix:after {
               clear: both;
           }
           .clearfix {
               *zoom: 1;
           }
           ```
        
           优点：代码更简洁
        
           缺点：ie6-7不支持after ,使用zoom:1 触发hasLayout。
        
      - [清除浮动相关demo](http://127.0.0.1:5500/demo/float-demo6.html)
  
  ### 1.6 案例
  
  - [demo](http://127.0.01:5500/demo/float-demo7.html)
  - [层级文章](https://juejin.im/post/6844903667175260174)